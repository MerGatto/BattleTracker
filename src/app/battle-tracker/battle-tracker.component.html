<div class="container-fluid">
  <div class="row">
    <table class="table table-striped table-bordered">
      <thead>
        <tr class="info row">
          <th class="col-md-2">
            Name
          </th>
          <th class="col-md-1">
            INI
          </th>
          <th class="col-md-1">
            Input
          </th>
          <th class="col-md-1">
            WM
          </th>
          <th class="col-md-1">
            Temp
          </th>
          <th class="col-md-2">
            Action
          </th>
          <th class="col-md-2">
            Interrupt Action
          </th>
          <th class="col-md-1">
          </th>
          <th class="col-md-1">
          </th>
        </tr>
      </thead>

      <tbody class="panel-body">
        <tr class="row" [ngClass]="getParticipantStyles(p)" *ngFor="let p of participants.items">
          <td>
            <input id="name" name="name" type="text" placeholder="Name" class="form-control input-md" (keydown)="inpName_KeyDown($event)" [(ngModel)]="p.name">
          </td>
          <td>
            <label class="control-label lblIni" for="ini">{{getInitiative(p)}} </label>
          </td>
          <td>
            <input class="form-control input-md inpIni" name="ini" type="number"(keydown)="inpIni_KeyDown($event)" (focus)="inp_Focus($event)" (input)="iniChange($event, p)" [(ngModel)]="p.ini" #field="ngModel" [min]="0">
          </td>
          <td>
            <input class="form-control input-md" name="wm" type="number" (focus)="inp_Focus($event)" (input)="wmChange($event, p)" [(ngModel)]="p.wm">
          </td>
          <td>
            <input class="form-control input-md" name="tmp" type="number" (focus)="inp_Focus($event)" [(ngModel)]="p.iniChange">
          </td>
          <td>
            <button type="button" class="btn btn-default" (click)="btnEdge_Click(p)" *ngIf="!p.edge && (!started || (passEnded && getInitiative(p) > 10))">
              Seize Initiative
            </button>
            <button type="button" class="btn btn-default" (click)="btnAct_Click(p)" *ngIf="started && (p.status == 1 || p.status == 2)">
              Act
            </button>
            <button type="button" class="btn btn-default" (click)="btnDelay_Click(p)" *ngIf="started && p.status == 1">
              Delay
            </button>
          </td>
          <td class="row">
              <label class="btn btn-default" [class.active]="p.interrupts.fullDefense">
                <input type="checkbox" class="hide" [(ngModel)]="p.interrupts.fullDefense" (click)="actnBtn_Click()" [disabled]="started && p.interrupts.fullDefense">{{"fullDefense" | translate}}
              </label>
              <div class="btn-group" dropdown>
                <button id="single-button" type="button" class="btn btn-primary" dropdownToggle>
                  Others <span class="caret"></span>
                </button>
                <ul dropdownMenu role="menu" aria-labelledby="single-button">
                  <li role="menuitem" class="buffer" *ngFor="let action of p.interrupts.actions">
                    <label class="dropdown-item btn btn-default btn-block text-left" [class.active]="p.interrupts[action]">
                      <input type="checkbox" class="hide" [(ngModel)]="p.interrupts[action]" (click)="actnBtn_Click()" [disabled]="started && p.interrupts[action]">
                      {{action | translate}}
                    </label>
                  </li>
                </ul>
              </div>
          </td>
          <td>
            <button type="button" class="btn btn-default" (click)="btnEnterCombat_Click(p)" *ngIf="p.ooc">
              Enter Combat
            </button>
            <button type="button" class="btn btn-default" (click)="btnLeaveCombat_Click(p)" *ngIf="!p.ooc">
              Leave Combat
            </button>
          </td>
          <td>
            <button type="button" class="btn btn-default" (click)="btnDelete_Click(p)">
              Delete
            </button>
          </td>
        </tr>
        <tr class="row">
          <td colspan="9">
            <button type="submit" class="btn btn-primary" (click)="btnAddParticipant_Click()"><span class="glyphicon glyphicon-plus"></span></button>
          </td>
        </tr>
      </tbody>
      <tfoot>
        <tr class="row">
          <td colspan="9">Turn {{combatTurn}}, Pass {{initiativeTurn}}</td>
        </tr>
      </tfoot>
    </table>
  </div>
  <div class="row">
    <button type="button" class="btn btn-primary" (click)="btnStartRound_Click()" *ngIf="!started">
      Start Round
    </button>
    <button type="button" class="btn btn-primary" (click)="btnNextPass_Click()" *ngIf="started && passEnded">
      Next Pass
    </button>
    <button type="button" class="btn btn-danger" (click)="btnReset_Click()">
      Reset
    </button>
  </div>
  <div class="row buffer-top">
    <button type="button" class="btn btn-warning" (click)="btnUndo_Click(p)">
      Undo
    </button>
    <button type="button" class="btn btn-warning" (click)="btnRedo_Click(p)">
      Redo
    </button>
  </div>
</div>